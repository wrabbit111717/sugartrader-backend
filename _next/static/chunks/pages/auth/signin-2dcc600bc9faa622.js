(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{7265:function(s,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/signin",function(){return a(471)}])},471:function(s,e,a){"use strict";a.r(e);var r=a(5893),i=a(9876),o=a(2870),t=a(4523),n=a(61),l=a(7841),d=a(5117),c=a(9737),u=a(7311),p=a(6169),m=a(1163),w=a(7294),h=a(7248),f=a(368),g=a(8028),x=a(8005),j=a(9704),P=a.n(j);e.default=()=>{let[s,e]=(0,w.useState)(!1),[a,j]=(0,w.useState)("signin"),k=(0,m.useRouter)(),{state:{user_data:v},dispatch:y}=(0,w.useContext)(u.Z),b=(0,h.c)({initialValues:{email:"",password:""},validate:{password:(0,f.d)({min:8},"Password must be at least 8 characters long"),email:(0,g.J)("Invalid email")}}),S=(0,h.c)({initialValues:{email:"",password:"",confirmPassword:"",name:""},validate:{password:(0,f.d)({min:8},"Password must be at least 8 characters long"),confirmPassword:s=>{if(s!==S.values.password)return"Passwords do not match"},email:(0,g.J)("Invalid email")}}),_=async()=>{try{e(!0);let s=(await x.Z.post(p.TU,{email:b.values.email,password:b.values.password})).token,a=P().decode(s);console.log(a,"decodedToken"),s?(y({field:"user_data",value:{token:s}}),localStorage.setItem("user",JSON.stringify(a)),k.push("/offers")):alert("Sign in is failed")}catch(s){console.error("Signin error:",s)}finally{e(!1)}},I=async()=>{try{if(e(!0),S.values.password!==S.values.confirmPassword){alert("Passwords do not match");return}let s=(await x.Z.post(p.K,{name:S.values.name,email:S.values.email,password:S.values.password,confirmPassword:S.values.confirmPassword})).token;s?(y({field:"user_data",value:{token:s}}),localStorage.setItem("user",JSON.stringify(s)),k.push("/offers")):alert("Sign up is failed")}catch(s){console.error("Signup error:",s)}finally{e(!1)}};return(0,r.jsxs)(i.k,{sx:s=>({width:"100vw",height:"100vh"}),direction:"column",justify:"center",align:"center",children:[(0,r.jsxs)(i.k,{direction:"column",align:"center",children:[(0,r.jsx)(o.E,{src:"/logo.svg",style:{width:"100px"}}),"signin"==a?(0,r.jsx)(t.x,{component:"form",maw:400,mx:"auto",onSubmit:b.onSubmit(()=>{_()}),children:(0,r.jsxs)(i.k,{direction:"column",gap:"20px",children:[(0,r.jsx)(n.o,{label:"Email",placeholder:"Email",withAsterisk:!0,...b.getInputProps("email"),mt:30,w:350}),(0,r.jsx)(n.o,{label:"Password",type:"password",placeholder:"Password",withAsterisk:!0,...b.getInputProps("password"),w:350}),(0,r.jsx)(l.z,{type:"submit",children:"Sign In"}),(0,r.jsxs)(i.k,{gap:10,justify:"center",children:[(0,r.jsx)(d.x,{children:"Not a member"}),(0,r.jsx)(d.x,{color:"#0099ff",weight:600,style:{cursor:"pointer"},onClick:()=>{j("signup")},children:"Sign Up"})]})]})}):(0,r.jsx)(t.x,{component:"form",maw:400,mx:"auto",onSubmit:S.onSubmit(()=>{I()}),children:(0,r.jsxs)(i.k,{direction:"column",gap:"20px",children:[(0,r.jsx)(n.o,{label:"Name",placeholder:"Name",withAsterisk:!0,...S.getInputProps("name"),mt:30,w:350}),(0,r.jsx)(n.o,{label:"Email",placeholder:"Email",withAsterisk:!0,...S.getInputProps("email"),w:350}),(0,r.jsx)(n.o,{label:"Password",type:"password",placeholder:"Password",withAsterisk:!0,...S.getInputProps("password"),w:350}),(0,r.jsx)(n.o,{label:"Confirm Password",type:"password",placeholder:"Confirm Password",withAsterisk:!0,...S.getInputProps("confirmPassword"),w:350})," ",(0,r.jsx)(l.z,{type:"submit",children:"Sign Up"}),(0,r.jsxs)(i.k,{gap:10,justify:"center",children:[(0,r.jsx)(d.x,{children:"Are you member"}),(0,r.jsx)(d.x,{color:"#0099ff",weight:600,style:{cursor:"pointer"},onClick:()=>{j("signin")},children:"Sign In"})]})]})})]}),(0,r.jsx)(c.f,{visible:s})]})}}},function(s){s.O(0,[714,912,888,774,179],function(){return s(s.s=7265)}),_N_E=s.O()}]);